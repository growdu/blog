# 两地三中心技术指标分析（距离、延迟、丢包率）

| 修改人 | 修改内容 | 修改时间   |
| ------ | -------- | ---------- |
| 段应寿 | 新建文档 | 2023-02-16 |
|        |          |            |
|        |          |            |



> - 两地是指**同城、异地**
> - 三中心是指**生产中心、同城容灾中心、异地容灾中心**

## 距离

> - **同城**是在同城或相近区域内 （ **≤ 200KM** ）建立两个数据中心 : 日常情况下可同时分担业务及管理系统的运行，并可切换运行；灾难情况下可在基本不丢失数据的情况下进行灾备应急切换，保持业务连续运行。
> - **异地 **主备中心之间的距离较远 （**＞200KM** ) ， 因此一般采用异步镜像，会有少量的数据丢失。异地灾难备份不仅可以防范火灾、建筑物破坏等可能遇到的风险隐患，还能够防范战争、地震、水灾等风险。

## 延迟

延迟主要和网络系统（网络硬件等）以及距离有关。

网络时延，抖动，丢包率的一般标准如下表所示：

| 参数   | VOIP   | 普通     | 电信级  |
| ------ | ------ | -------- | ------- |
| 时延   | <200ms | <30ms    | <5ms    |
| 抖动   | <40ms  | <20-30ms | <1ms    |
| 丢包率 | <8%    | <0.5%    | <0.001% |

对于一般运用程序来说，如无特殊说明延迟保持在普通级别即可，即尽量小于30ms。

对于广域网来说，受传输距离影响，延迟可适当放宽，但也应小于200ms。

### 网络系统

> 网络系统分为计算网络、存储网络和对外服 网络。其中计算网络用来实现服务器设备之间的通信，根据对带宽、延迟的不同要求，可以基于千兆、万兆以太网或是 Infiniband 、 Myrinet 等高性能网络构建；存储网络用来实现服务器和存储设备或是存储设备之间的数据通信，通常基于 FC 、千兆和万兆 IP 网络（ iSCSI 、 NFS 、 CIFS 等）或是 Infiniband 网络构建；服务网络用来为 互联网或是局域网用户提供服务， 对网络带宽要求不高，通常采用百兆或是千兆以太网络即可。

### 传输距离

> 注意机房间的延迟问题，大的可能达到100ms以上，如果业务需要多次跨机房请求应用的话，延迟的问题会彻底放大。
>
> 如北京到上海的距离大约1300公里，即使假设一条高速的网络专线，光纤以光速传输，一个来回也需要近10ms的延迟。在实际网络线路之间还会经历各种路由器、交换机等网络设备，实际延迟可能会达到30ms~100ms，如果网络发生抖动，延迟甚至会到达1秒。

> 一般同城采用同步方式同步数据（网络延迟较低），异地采用异步方式同步数据（网络延迟较高，允许少量数据丢失）。

## 丢包率

丢包率主要和传输距离、流量、网络系统有关。

网络丢包率越小越好，最好是零丢包。

丢包率一般不能高于正常网络的丢包率（仅受距离等不可控因素导致的丢包率）。

网络时延，抖动，丢包率的一般标准如下表所示：

| 参数   | VOIP   | 普通     | 电信级  |
| ------ | ------ | -------- | ------- |
| 时延   | <200ms | <30ms    | <5ms    |
| 抖动   | <40ms  | <20-30ms | <1ms    |
| 丢包率 | <8%    | <0.5%    | <0.001% |

一般运用程序如无特殊需要保持在普通级别即可。

> 千兆网卡在流量大于 200Mbps 时，丢包率应小于万分之五； 百兆网卡在流量大于 60Mbps 时， 丢包率应小于万分之一。

> 针对局域网和广域网的距离不同，局域网内丢包率小于1%。广域网应比局域网稍微宽松一点点，但是也要控制在1%左右，丢包率大于1%，容易造成重传造成网络拥塞、延时增大等问题。

# reference

1. https://cloud.tencent.com/developer/article/1645727

2. https://blog.csdn.net/zgpeace/article/details/104096446
3. https://blog.51cto.com/zhaoshilei/1888923
4. http://blog.itpub.net/26736162/viewspace-2216584/
5. https://cloud.tencent.com/developer/article/1082855
6. https://www.zhihu.com/question/48728378
7. https://www.gbase8.cn/2088