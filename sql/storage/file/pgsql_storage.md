# pgsql 文件存储

在PostgreSQL中，每个数据库有一个数据库id。以数据库id创建目录，目录下存放对应的表。每个表都用一个文件存储，表文件以表的OID命名。
对于大小超出1G的表数据文件，PG会自动将其切分为多个文件来存储，切分出的文件用OID.<顺序号>来命名。

后缀为_fsm和_vm这两个表文件的附属文件是空间空闲映射表文件和可见性映射表文件。
每个表文件由多个BLCKSZ字节大小的page组成，文件的写入是以page为最小单位。
在PostgreSQL中，每个page缺省大小为8K，可以在编译PostgreSQL时指定BLCKSZ的大小，对于IO性能较好的硬件，增加BLCKSZ的大小可以显著提升数据库性能。
每个page又可以包含多个tuple（在PG中将保存在磁盘中的块称为page，而将内存中的块称为buffer，行称为tuple，这些都是与数学概念相同的）。


在PostgreSQL中，表文件中的tuple之间不进行关联，这样的表文件称为堆文件，每个堆文件都是由多个page组成。



